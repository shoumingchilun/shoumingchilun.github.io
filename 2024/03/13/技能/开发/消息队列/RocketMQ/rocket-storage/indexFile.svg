<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1253 433.3333740234375" width="1253" height="433.3333740234375">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
      @font-face {
        font-family: "Assistant";
        src: url("https://excalidraw.com/Assistant-Regular.woff2");
      }
    </style>
    
  </defs>
  <rect x="0" y="0" width="1253" height="433.3333740234375" fill="#ffffff"></rect><g stroke-linecap="round" transform="translate(138 244) rotate(0 536 22)"><path d="M11 0 C401.59 2.57, 792.59 2.15, 1061 0 M11 0 C245.78 -3.48, 481.02 -3.26, 1061 0 M1061 0 C1070.2 1.59, 1071.77 5.35, 1072 11 M1061 0 C1067.63 -1.32, 1071.82 1.38, 1072 11 M1072 11 C1070.94 18.14, 1073.8 26.29, 1072 33 M1072 11 C1071.77 18.56, 1071.43 25.69, 1072 33 M1072 33 C1073.99 41.36, 1066.61 43.7, 1061 44 M1072 33 C1070.05 40.69, 1070.27 45.14, 1061 44 M1061 44 C701.95 41.86, 343.95 42.57, 11 44 M1061 44 C662.85 44.68, 264.65 44.86, 11 44 M11 44 C2.28 42.79, 1.28 39.64, 0 33 M11 44 C4.41 45.83, -0.59 41.87, 0 33 M0 33 C0.29 25.93, 1.37 20.76, 0 11 M0 33 C-0.41 26.33, 0.56 22.01, 0 11 M0 11 C-0.38 2.3, 2.24 0.31, 11 0 M0 11 C1.89 3.7, 3.07 1.52, 11 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g stroke-linecap="round"><g transform="translate(272 242) rotate(0 -1 23)"><path d="M-0.4 0.54 C-0.65 8.15, -1.41 38.07, -1.69 45.61 M0.39 0.34 C0.12 8.01, -1.49 38.45, -1.97 46.11" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(644 244) rotate(0 -1 23)"><path d="M-0.02 0.16 C-0.21 7.92, -1.24 38.7, -1.6 46.34 M-0.7 -0.23 C-0.89 7.4, -1.51 37.74, -1.82 45.54" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g transform="translate(156 254) rotate(0 49.169960021972656 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">head zone</text></g><g transform="translate(372 256) rotate(0 80.5799331665039 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">slot zone(500W)</text></g><g transform="translate(700 256) rotate(0 117.4299087524414 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">index item zone(2000W)</text></g><g transform="translate(430 52) rotate(0 64.40995788574219 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">key = abc......</text></g><g transform="translate(390 78) rotate(0 125.18989562988281 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">slotpos = hash(key)%500</text></g><g stroke-linecap="round" transform="translate(448 156) rotate(0 95 36)"><path d="M18 0 C63.46 1.3, 107.7 1.29, 172 0 M18 0 C67.95 0.46, 117.37 -0.07, 172 0 M172 0 C182.97 1.55, 188.78 5, 190 18 M172 0 C182.27 -0.24, 189.86 3.85, 190 18 M190 18 C191.15 26.12, 191.16 32.96, 190 54 M190 18 C188.69 28.19, 189.01 39.1, 190 54 M190 54 C190.41 67.68, 183.54 71.54, 172 72 M190 54 C191.3 65.97, 186.12 70.94, 172 72 M172 72 C135.81 70.68, 97.05 73.05, 18 72 M172 72 C120.38 73.51, 68.12 72.73, 18 72 M18 72 C6.04 73.92, -0.79 67.11, 0 54 M18 72 C4.79 72.16, 1.32 65.62, 0 54 M0 54 C-1.84 41.83, 0.04 27.28, 0 18 M0 54 C0.27 46.06, 0.31 37.81, 0 18 M0 18 C-1.19 5.97, 5.03 1.65, 18 0 M0 18 C1.05 3.77, 5.86 -1.05, 18 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(453.7500228881836 167) rotate(0 89.2499771118164 25)"><text x="89.2499771118164" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">每个slot记录了对应</text><text x="89.2499771118164" y="42.519999999999996" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">index item的下标</text></g><g stroke-linecap="round" transform="translate(671 151) rotate(0 286 37)"><path d="M18.5 0 C225.28 1.78, 433.23 1.87, 553.5 0 M18.5 0 C227.97 1.52, 437.84 1.53, 553.5 0 M553.5 0 C565.98 -0.49, 571.22 6.63, 572 18.5 M553.5 0 C565.18 2.26, 571.38 6.87, 572 18.5 M572 18.5 C573.07 28.15, 571.89 41.55, 572 55.5 M572 18.5 C572.01 31.9, 571.05 46.9, 572 55.5 M572 55.5 C570.56 66.37, 567.75 72.79, 553.5 74 M572 55.5 C570.05 65.93, 565.14 72.29, 553.5 74 M553.5 74 C413.99 74.75, 276.25 74.62, 18.5 74 M553.5 74 C355.74 75.9, 157.43 75.7, 18.5 74 M18.5 74 C5.41 75.33, -1.15 69.27, 0 55.5 M18.5 74 C5.93 75.24, 1.64 66.23, 0 55.5 M0 55.5 C1.61 46.18, -1.2 36.3, 0 18.5 M0 55.5 C0.61 42.51, 0.32 29.82, 0 18.5 M0 18.5 C0.08 5.55, 4.46 -0.54, 18.5 0 M0 18.5 C-2.17 4.15, 5.34 1.64, 18.5 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(677.4701232910156 163) rotate(0 279.5298767089844 25)"><text x="279.5298767089844" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">每个index item记录了当前位置对应消息的keyhash、commitlog</text><text x="279.5298767089844" y="42.519999999999996" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">offset、size，以及冲突的index item的下标</text></g><g transform="translate(222 10) rotate(0 15.029983520507812 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">key</text></g><g stroke-linecap="round"><g transform="translate(264 18) rotate(0 77 20)"><path d="M-0.8 -0.39 C12.17 1.19, 52.99 1.73, 78.6 8.28 C104.21 14.84, 140.3 33.5, 152.85 38.91 M0.99 -1.64 C13.78 -0.34, 52.28 -0.57, 77.97 6.31 C103.66 13.19, 142.45 34.28, 155.14 39.66" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(264 18) rotate(0 77 20)"><path d="M130.25 37.29 C138.71 39.33, 148.97 37.27, 155.14 39.66 M130.25 37.29 C134.74 37.28, 141.23 38.84, 155.14 39.66" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(264 18) rotate(0 77 20)"><path d="M137.59 21.85 C143.2 29.5, 150.77 33.12, 155.14 39.66 M137.59 21.85 C140.53 25.11, 145.48 29.91, 155.14 39.66" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(422 114) rotate(0 -9 61)"><path d="M0.04 0.13 C-2.66 20.57, -13.8 101.64, -16.94 121.87 M-1.4 -0.85 C-4.1 19.86, -14.84 102.77, -17.34 123.34" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(422 114) rotate(0 -9 61)"><path d="M-22.88 98.97 C-21.5 106.56, -20.6 109.27, -17.34 123.34 M-22.88 98.97 C-21.32 105.27, -20.59 110.88, -17.34 123.34" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(422 114) rotate(0 -9 61)"><path d="M-5.92 101.11 C-8.58 108.19, -11.74 110.39, -17.34 123.34 M-5.92 101.11 C-8.75 106.79, -12.45 111.84, -17.34 123.34" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(402 290) rotate(0 168 38)"><path d="M0.86 -0.63 C27.15 12.14, 101.47 74.99, 157.23 76.08 C212.99 77.17, 305.54 17.57, 335.42 5.91 M-0.14 1.66 C26.57 14.68, 103.79 76.73, 159.54 77.65 C215.29 78.57, 304.76 18.91, 334.36 7.18" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(402 290) rotate(0 168 38)"><path d="M317.32 25.48 C320.81 19.29, 326.44 14.83, 334.36 7.18 M317.32 25.48 C322.34 19.15, 326.7 15.68, 334.36 7.18" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(402 290) rotate(0 168 38)"><path d="M309.55 10.25 C315 7.99, 322.66 7.51, 334.36 7.18 M309.55 10.25 C316.9 8.37, 323.54 9.35, 334.36 7.18" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(740 298) rotate(0 35 14)"><path d="M-0.89 1.04 C4.92 6.19, 21.89 30.13, 33.67 29.76 C45.45 29.39, 63.58 3.97, 69.79 -1.19" stroke="#f08c00" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(740 298) rotate(0 35 14)"><path d="M60.35 20.96 C64.2 16, 63.98 11.73, 69.79 -1.19" stroke="#f08c00" stroke-width="2.5" fill="none"></path></g><g transform="translate(740 298) rotate(0 35 14)"><path d="M48.32 9.71 C54.49 7.11, 56.7 5.12, 69.79 -1.19" stroke="#f08c00" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(815.5490310337395 301.71338194285454) rotate(0 35 14)"><path d="M-0.68 0.3 C5.32 5.48, 23.22 30.19, 34.97 29.9 C46.73 29.61, 63.96 3.8, 69.85 -1.42" stroke="#f08c00" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(815.5490310337395 301.71338194285454) rotate(0 35 14)"><path d="M61.12 21.02 C63.71 17.89, 64.91 11.22, 69.85 -1.42" stroke="#f08c00" stroke-width="2.5" fill="none"></path></g><g transform="translate(815.5490310337395 301.71338194285454) rotate(0 35 14)"><path d="M48.74 10.16 C53.87 9.42, 57.72 5.08, 69.85 -1.42" stroke="#f08c00" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(889.5490310337395 301.71338194285454) rotate(0 35 14)"><path d="M1.01 -0.39 C6.38 4.66, 21.98 30.37, 33.37 30.04 C44.75 29.71, 63.3 2.91, 69.31 -2.35" stroke="#f08c00" stroke-width="2.5" fill="none" stroke-dasharray="8 10"></path></g><g transform="translate(889.5490310337395 301.71338194285454) rotate(0 35 14)"><path d="M60.38 20.02 C63.33 9.99, 67.6 1.01, 69.31 -2.35" stroke="#f08c00" stroke-width="2.5" fill="none"></path></g><g transform="translate(889.5490310337395 301.71338194285454) rotate(0 35 14)"><path d="M48.09 9.05 C55.9 3.28, 65.05 -1.35, 69.31 -2.35" stroke="#f08c00" stroke-width="2.5" fill="none"></path></g></g><mask></mask><g transform="translate(780 344) rotate(0 45 12.5)"><text x="0" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#f08c00" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic"> 如果冲突</text></g><g stroke-linecap="round" transform="translate(10 295.3333740234375) rotate(0 142 64)"><path d="M32 0 C107.35 0.63, 184.43 2.7, 252 0 M32 0 C83.46 -1.28, 134.24 -0.18, 252 0 M252 0 C272.76 -1.1, 282.18 12.3, 284 32 M252 0 C273.75 1.61, 286.2 9.53, 284 32 M284 32 C283.51 47.75, 286.09 60.95, 284 96 M284 32 C285.18 52.89, 284.93 74.37, 284 96 M284 96 C282.55 116.39, 272.7 126.21, 252 128 M284 96 C283.48 117.89, 275 129.23, 252 128 M252 128 C204.6 128.61, 156.87 129.15, 32 128 M252 128 C196.95 126.99, 140.64 125.94, 32 128 M32 128 C10.62 127.14, -0.65 115.91, 0 96 M32 128 C10.8 126.58, 1.51 117.29, 0 96 M0 96 C1.32 69.62, -1.18 47.22, 0 32 M0 96 C0.3 80.52, 0.17 65.35, 0 32 M0 32 C-0.12 10.5, 8.82 0.17, 32 0 M0 32 C1.47 8.37, 12.23 -0.77, 32 0" stroke="#1e1e1e" stroke-width="2" fill="none"></path></g><g transform="translate(19.230010986328125 309.3333740234375) rotate(0 132.76998901367188 50)"><text x="132.76998901367188" y="17.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">head中记录了一些元信息，比</text><text x="132.76998901367188" y="42.519999999999996" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">如所有消息所处的commitlog </text><text x="132.76998901367188" y="67.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">offset的范围、index item </text><text x="132.76998901367188" y="92.52" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="alphabetic">zone的位图等</text></g></svg>